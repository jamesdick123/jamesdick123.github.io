<html>
  <head>
    <title>LoL Match History updated</title>
  </head>
  <body>
    <h1>LoL Match History</h1>
    <p>Enter your LoL username:</p>
    <form id="form">
      <input type="text" id="username" name="username">
      <button type="submit" onclick="getMatchHistory()">Submit</button>
    </form>
    <br>
    <div id="matchHistoryContainer">
      <table id="matchHistoryTable">
        <tr>
          <th>Game ID</th>
          <th>Champion</th>
          <th>Queue</th>
          <th>Timestamp</th>
        </tr>
      </table>
    </div>
    <script>
      const API_KEY = 'RGAPI-ddb895b7-bba7-4689-92c0-9d255dd04756';
      const API_URL = 'https://euw1.api.riotgames.com';

      async function getMatchHistory() {
        console.log('called');
        const username = document.getElementById('username').value;
        const response = await fetch(`${API_URL}/lol/summoner/v4/summoners/by-name/${username}?api_key=${API_KEY}`);
        const summoner = await response.json();
        const summonerId = summoner.id;
        const matchHistoryResponse = await fetch(`${API_URL}/lol/match/v4/matchlists/by-account/${summonerId}?api_key=${API_KEY}`);
        const matchHistory = await matchHistoryResponse.json();
        console.log('reached');
        console.log(matchHistory);
        // Display the match history data in a table
        const table = document.getElementById('matchHistoryTable');
        for (const match of matchHistory.matches) {
          const row = document.createElement('tr');
          const gameIdCell = document.createElement('td');
          gameIdCell.innerText = match.gameId;
          const championCell = document.createElement('td');
          championCell.innerText = match.champion;
          const queueCell = document.createElement('td');
          queueCell.innerText = match.queue;
          const timestampCell = document.createElement('td');
          timestampCell.innerText = match.timestamp;
          row.appendChild(gameIdCell);
          row.appendChild(championCell);
          row.appendChild(queueCell);
          row.appendChild(timestampCell);
          table.appendChild(row);
          console.log('end');
        }
      }
    </script>
  </body>
</html>
